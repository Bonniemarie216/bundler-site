<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='en' http-equiv='Content-Language'>
<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
<meta content='276VSYOko8B8vIu1i8i5qbj7_ql5PXo0dU69XQy-SL' name='globalsign-domain-verification'>
<title>
Bundler: The best way to manage a Ruby application's gems
</title>

<link href='/whats_new.html' rel='canonical'>
<script src="/application.min.js"></script>
<link href="/application.css" rel="stylesheet" />
<link href='/images/apple-touch-icon.png' rel='apple-touch-icon' sizes='180x180'>
<link href='/images/favicon-32x32.png' rel='icon' sizes='32x32' type='image/png'>
<link href='/images/favicon-16x16.png' rel='icon' sizes='16x16' type='image/png'>
<link href='/manifest.json' rel='manifest'>
<link color='#50bced' href='/images/safari-pinned-tab.svg' rel='mask-icon'>
<meta content='bundler.io' name='apple-mobile-web-app-title'>
<meta content='bundler.io' name='application-name'>
<meta content='#ffffff' name='theme-color'>

<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />

</head>
<body class=''>
<link crossorigin='anonymous' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css' integrity='sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==' referrerpolicy='no-referrer' rel='stylesheet'>
<nav class='navbar navbar-expand-md navbar-light container-md justify-content-between'>
<a href="/" class="navbar-brand mr-auto font-weight-bold">Bundler</a>
<button aria-controls='bs-navbar-collapse' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler' data-target='#bs-navbar-collapse' data-toggle='collapse' type='button'>
<span class='navbar-toggler-icon'></span>
</button>
<div class='collapse navbar-collapse flex-grow-0' id='bs-navbar-collapse'>
<ul class='nav navbar-nav'>
<li class='nav-item'>
<input class='input-search my-1 pl-1 pt-1' id='input-search' placeholder='Type to search...' type='text'>
<i class='fa fa-search text-opacity-40 px-1 py-2'></i>
</li>
<li class='nav-item'><a href="/docs.html" class="nav-link">Docs</a></li>
<li class='nav-item'><a href="/contributors.html" class="nav-link">Team</a></li>
<li class='nav-item'><a href="/blog" class="nav-link">Blog</a></li>
<li class='nav-item'><a href="https://github.com/rubygems/rubygems/tree/master/bundler" target="_blank" rel="noopener noreferrer" class="nav-link">Repository</a></li>
</ul>
</div>
</nav>

<div class='main-wrapper container-fluid'>
<div class='row bg-light-blue header'>
<img src="/images/docs_header_transparent_bg.png" srcset="/images/docs_header_transparent_bg.png 1x, /images/docs_header_transparent_bg@2x.png 2x, /images/docs_header_transparent_bg@3x.png 3x" class="img-fluid header-padding" style="max-width: 400px;" alt="" />
</div>
<div class='row'>
<div class='container' id='guide-container'>
<div id='wrapper'>
<div class='d-none d-sm-block' id='sidebar-wrapper'>
<div class='sidebar-nav'>
<h4>Guides</h4>
<ul>
<li class=''>
<a href="/guides/faq.html">Frequently Asked Questions</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_2_upgrade.html">How to Upgrade to Bundler 2</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/creating_gem.html">How to create a Ruby gem with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/deploying.html">How to deploy bundled applications</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/git.html">How to install gems from git repositories</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/using_bundler_in_applications.html">How to manage application dependencies with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/groups.html">How to manage groups of gems</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_sharing.html">How to package and share code using a Gemfile</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/rubygems_tls_ssl_troubleshooting_guide.html">How to troubleshoot RubyGems and Bundler TLS/SSL Issues</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/updating_gems.html">How to update gems with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_in_a_single_file_ruby_script.html">How to use Bundler in a single-file Ruby script</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_docker_guide.html">How to use Bundler with Docker</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/rails.html">How to use Bundler with Rails</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_setup.html">How to use Bundler with Ruby</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/sinatra.html">How to use Bundler with Sinatra</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/git_bisect.html">How to use git bisect with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_plugins.html">How to write a Bundler plugin</a>
</li>
<li class='separator'>
<hr>
</li>
</ul>

</div>
</div>
<div class='guide contents' id='page-content-wrapper'>
<div class='container guide'>
<h1>What's New in each Release</h1>
<div class='row'>
<div class='col-12'>
<a href="/v2.3/whats_new.html" class="btn btn-sm btn-primary">v2.3</a>
<a href="/v2.2/whats_new.html" class="btn btn-sm btn-primary">v2.2</a>
<a href="/v2.1/whats_new.html" class="btn btn-sm btn-secondary">v2.1</a>
<a href="/v2.0/whats_new.html" class="btn btn-sm btn-primary">v2.0</a>
<a href="/v1.17/whats_new.html" class="btn btn-sm btn-primary">v1.17</a>
<a href="/v1.16/whats_new.html" class="btn btn-sm btn-primary">v1.16</a>
<a href="/v1.15/whats_new.html" class="btn btn-sm btn-primary">v1.15</a>
<a href="/v1.14/whats_new.html" class="btn btn-sm btn-primary">v1.14</a>
<a href="/v1.13/whats_new.html" class="btn btn-sm btn-primary">v1.13</a>
<a href="/v1.12/whats_new.html" class="btn btn-sm btn-primary">v1.12</a>
</div>
</div>

<p>
This time there was not blog post announcement for the 2.1 release, but as
always, a detailed list of every change is provided in
<a href="https://github.com/rubygems/bundler/blob/2-1-stable/CHANGELOG.md">the changelog</a>.
</p>
<p>
The main change in bundler 2.1 is that deprecations for upcoming breaking
changes in bundler 3 will be turned on by default. We do this to grab
feedback and communicate early to our users the kind of changes we're
intending to ship with bundler 3, aimed obviously at making the library
better.
</p>
<p>
If you don't want to deal with deprecations right now and want to toggle
them off, you can do it through configuration. Set the
<code>BUNDLE_SILENCE_DEPRECATIONS</code> environment variable to
<code>true</code>, or configure it through <code>bundle config</code> either
globally through <code>bundle config set silence_deprecations true</code>
command, or locally through <code>bundle config set --local&#x000A;silence_deprecations true</code>. From now on in this document we will
assume that all three of these configuration options are available, but will
only mention <code>bundle config set &lt;option&gt; &lt;value&gt;</code>.
</p>
<p>
As a general note, these changes are intended to improve the experience using
bundler for <strong>new</strong> users, who have no existing usage routines
nor possibly biased opinions about how the tool should work based on how it
has historically worked.  We do understand that changing behaviour that have
been existing for years can be annoying for old users, that's why we intend
to make this process as smooth as possible for everyone.
</p>
<p>
I'll be dividing the deprecations into four groups: CLI deprecations, Helper
deprecations, DSL deprecations, and misc deprecations. Let's dive into each of
them.
</p>
<h3>CLI deprecations</h3>
<div class='contents'>
<div class='bullet'>
<div class='description'>
<p>
The CLI defines a set of commands and options that can be used by our
users to create command lines that bundler can understand. There's a
number of changes in the upcoming 3 version.
</p>
<ul>
<li>
<p>
Flags passed to <code>bundle install</code> that relied on being
remembered across invocations have been deprecated.
</p>
<p>
In particular, the <code>--clean</code>,
<code>--deployment</code>, <code>--frozen</code>,
<code>-no-prune</code>, <code>--path</code>,
<code>--shebang</code>, <code>--system</code>,
<code>--without</code>, and <code>--with</code> options to
<code>bundle install</code>.
</p>
<p>
Remembering CLI options has been a source of historical confusion
and bug reports, not only for beginners but also for experienced
users. A CLI tool should not behave differently across exactly the
same invocations _unless_ explicitly configured to do so. This is
what configuration is about after all, and things should never be
silently configured without the user knowing about it.
</p>
<p>
The problem with changing this behavior is that very common
workflows are relying on it. For example, when you run
<code>bundle install --without development:test</code> in
production, those flags are persisted in the app's configuration
file and further <code>bundle</code> invocations will happily
ignore development and test gems.  This magic will disappear from
bundler 3, and you will explicitly need to configure it, either
through environment variables, application configuration, or
machine configuration. For example, with <code>bundle config set&#x000A;without development test</code>.
</p>
<p>
The removal of this kind of flag also applies to analogous commands,
for example, to <code>bundle check --path</code>.
</p>
</li>
<li>
<p>
The <code>--force</code> flag to <code>bundle install</code> and
<code>bundle update</code> has been renamed to
<code>--redownload</code>.
</p>
<p>
This is just a simple rename of the flag, to make more apparent
what it actually does. This flag forces redownloading every gem,
it doesn't "force" anything else.
</p>
</li>
<li>
<p>
<code>bundle viz</code> will be removed and extracted to a plugin.
</p>
<p>
This is the only bundler command requiring external dependencies,
both an OS dependency (the <code>graphviz</code> package) and a
gem dependency (the <code>ruby-graphviz</code> gem). Removing
these dependencies will make development easier and it was also
seen by the bundler team as an opportunity to develop a bundler
plugin that it's officially maintained by the bundler team, and
that users can take as a reference to develop their own plugins.
The plugin will contain the same code as the old core command, the
only difference being that the command is now implemented as
<code>bundle graph</code> which is much easier to understand.
However, the details of the plugin are under discussion. See
[#7041](https://github.com/rubygems/bundler/issues/7041).
</p>
</li>
<li>
<p>
The <code>bundle console</code> will be removed and replaced with
<code>bin/console</code>.
</p>
<p>
Over time we found <code>bundle console</code> hard to maintain
because every user would want to add her own specific tweaks to
it. In order to ease maintenance and reduce bikeshedding
discussions, we're removing the <code>bundle console</code>
command in favor of a <code>bin/console</code> script created by
<code>bundle gem</code> on gem generation that users can tweak to
their needs.
</p>
</li>
<li>
<p>
The <code>bundle install</code> command will no longer accept a
<code>--binstubs</code> flag.
</p>
<p>
The <code>--binstubs</code> option has been removed from
<code>bundle install</code> and replaced with the <code>bundle&#x000A;binstubs</code> command. The <code>--binstubs</code> flag would
create binstubs for all executables present inside the gems in the
project. This was hardly useful since most users will only use a
subset of all the binstubs available to them. Also, it would force
the introduction of a bunch of most likely unused files into
source control. Because of this, binstubs now must be created and
checked into version control individually.
</p>
</li>
<li>
<p>
The <code>bundle inject</code> command is deprecated and replaced
with <code>bundle add</code>.
</p>
<p>
We believe the new command fits the user's mental model better and
it supports a wider set of use cases. The interface supported by
<code>bundle inject</code> works exactly the same in <code>bundle&#x000A;add</code>, so it should be easy to migrate to the new command.
</p>
</li>
</ul>
</div>
</div>
</div>
<h4>Helper deprecations</h4>
<div class='contents'>
<div class='bullet'>
<div class='description'>
<ul>
<li>
<p>
<code>Bundler.clean_env</code>,
<code>Bundler.with_clean_env</code>,
<code>Bundler.clean_system</code>, and
<code>Bundler.clean_exec</code> are deprecated.
</p>
<p>
All of these helpers ultimately use <code>Bundler.clean_env</code>
under the hood, which makes sure all bundler-related environment
are removed inside the block it yields.
</p>
<p>
After quite a lot user reports, we noticed that users don't
usually want this but instead want the bundler environment as it
was before the current process was started. Thus,
<code>Bundler.with_original_env</code>,
<code>Bundler.original_system</code>, and
<code>Bundler.original_exec</code> were born.  They all use the
new <code>Bundler.original_env</code> under the hood.
</p>
<p>
There's however some specific cases where the good old
<code>Bundler.clean_env</code> behavior can be useful. For
example, when testing Rails generators, you really want an
environment where <code>bundler</code> is out of the picture. This
is why we decided to keep the old behavior under a new more clear
name, because we figured the word "clean" was too ambiguous. So we
have introduced <code>Bundler.unbundled_env</code>,
<code>Bundler.with_unbundled_env</code>,
<code>Bundler.unbundled_system</code>, and
<code>Bundler.unbundled_exec</code>.
</p>
</li>
<li>
<p>
<code>Bundler.environment</code> is deprecated in favor of
<code>Bundler.load</code>.
</p>
<p>
We're not sure how people might be using this directly but we have
removed the <code>Bundler::Environment</code> class which was
instantiated by <code>Bundler.environment</code> since we realized
the <code>Bundler::Runtime</code> class was the same thing. During
the transition <code>Bundler.environment</code> will delegate to
<code>Bundler.load</code>, which holds the reference to the
<code>Bundler::Environment</code>.
</p>
</li>
</ul>
</div>
</div>
</div>
<h4>DSL deprecations</h4>
<div class='contents'>
<div class='bullet'>
<div class='description'>
<p>
The following deprecations in bundler's DSL are meant to prepare for
the strict source pinning in bundler 3, where the source for every
dependency will be unambiguously defined.
</p>
<ul>
<li>
<p>
Multiple global Gemfile sources will no longer be supported.
</p>
<p>
Instead of something like this:
</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Gemfile</span>&#x000A;<span class="n">source</span> <span class="s2">"https://main_source"</span>&#x000A;<span class="n">source</span> <span class="s2">"https://another_source"</span>&#x000A;&#x000A;<span class="n">gem</span> <span class="s2">"dependency1"</span>&#x000A;<span class="n">gem</span> <span class="s2">"dependency2"</span>&#x000A;&#x000A;</code></pre></div>
<p>
do something like this:
</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Gemfile</span>&#x000A;<span class="n">source</span> <span class="s2">"https://main_source"</span>&#x000A;&#x000A;<span class="n">gem</span> <span class="s2">"dependency1"</span>&#x000A;&#x000A;<span class="n">source</span> <span class="s2">"https://another_source"</span> <span class="k">do</span>&#x000A;  <span class="n">gem</span> <span class="s2">"dependency2"</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;</code></pre></div>
</li>
<li>
<p>
Global `path` and `git` sources will no longer be supported.
</p>
<p>
Instead of something like this:
</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Gemfile</span>&#x000A;<span class="n">path</span> <span class="s2">"/my/path/with/gems"</span>&#x000A;<span class="n">git</span> <span class="s2">"https://my_git_repo_with_gems"</span>&#x000A;&#x000A;<span class="n">gem</span> <span class="s2">"dependency1"</span>&#x000A;<span class="n">gem</span> <span class="s2">"dependency2"</span>&#x000A;&#x000A;</code></pre></div>
<p>
do something like this:
</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Gemfile</span>&#x000A;<span class="n">gem</span> <span class="s2">"dependency1"</span><span class="p">,</span> <span class="ss">path: </span><span class="s2">"/my/path/with/gems"</span>&#x000A;<span class="n">gem</span> <span class="s2">"dependency2"</span><span class="p">,</span> <span class="ss">git: </span><span class="s2">"https://my_git_repo_with_gems"</span>&#x000A;&#x000A;</code></pre></div>
<p>
or use the block forms if you have multiple gems for each source and
you want to be a bit DRYer:
</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Gemfile</span>&#x000A;<span class="n">path</span> <span class="s2">"/my/path/with/gems"</span> <span class="k">do</span>&#x000A;  <span class="c1"># gem "dependency1"</span>&#x000A;  <span class="c1"># ...</span>&#x000A;  <span class="c1"># gem "dependencyn"</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="n">git</span> <span class="s2">"https://my_git_repo_with_gems"</span> <span class="k">do</span>&#x000A;  <span class="c1"># gem "dependency1"</span>&#x000A;  <span class="c1"># ...</span>&#x000A;  <span class="c1"># gem "dependencyn"</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;</code></pre></div>
</li>
</ul>
</div>
</div>
</div>
<h4>Misc deprecations</h4>
<div class='contents'>
<div class='bullet'>
<div class='description'>
<ul>
<li>
<p>
Deployment helpers for <code>vlad</code> and
<code>capistrano</code> are being removed.
</p>
<p>
These are natural deprecations since the <code>vlad</code> tool
has had no activity for years whereas <code>capistrano</code> 3
has built-in Bundler integration in the form of the
`capistrano-bundler` gem, and everyone using Capistrano 3 should
be already using that instead. If for some reason, you are still
using Capistrano 2, feel free to copy the Capistrano tasks out of
the Bundler 2 file <code>lib/bundler/deployment.rb</code> and put
them into your app.
</p>
<p>
In general, we don't want to maintain integrations for every
deployment system out there, so that's why we are removing these.
</p>
</li>
</ul>
</div>
</div>
</div>
</div>

</div>
</div>
</div>
</div>
<div class='row'>
<div class='container'>
<div class='d-sm-none' id='bottom-sidebar-wrapper'>
<div class='bottom-sidebar-nav'>
<ul>
<li class=''>
<a href="/guides/faq.html">Frequently Asked Questions</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_2_upgrade.html">How to Upgrade to Bundler 2</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/creating_gem.html">How to create a Ruby gem with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/deploying.html">How to deploy bundled applications</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/git.html">How to install gems from git repositories</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/using_bundler_in_applications.html">How to manage application dependencies with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/groups.html">How to manage groups of gems</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_sharing.html">How to package and share code using a Gemfile</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/rubygems_tls_ssl_troubleshooting_guide.html">How to troubleshoot RubyGems and Bundler TLS/SSL Issues</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/updating_gems.html">How to update gems with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_in_a_single_file_ruby_script.html">How to use Bundler in a single-file Ruby script</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_docker_guide.html">How to use Bundler with Docker</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/rails.html">How to use Bundler with Rails</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_setup.html">How to use Bundler with Ruby</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/sinatra.html">How to use Bundler with Sinatra</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/git_bisect.html">How to use git bisect with Bundler</a>
</li>
<li class='separator'>
<hr>
</li>
<li class=''>
<a href="/guides/bundler_plugins.html">How to write a Bundler plugin</a>
</li>
<li class='separator'>
<hr>
</li>
</ul>

</div>
</div>
</div>
</div>
<script src="/anchors.min.js"></script>

<div class='row bg-light-blue'>
<div class='container'>
<div class='contents'>
<div class='edit-on-github text-center'>
<a href="https://github.com/rubygems/bundler-site/blob/master/source/v2.1/whats_new.html.haml">Edit this document on GitHub</a> if you caught an error or noticed something was missing.
</div>
</div>
</div>
</div>

</div>
<div class='footer'>
<nav class='navbar justify-content-center'>
<ul class='navbar-nav'>
<li class='nav-item'><a href="/docs.html" class="nav-link px-3">Docs</a></li>
<li class='nav-item'><a href="/contributors.html" class="nav-link px-3">Team</a></li>
<li class='nav-item'><a href="/blog" class="nav-link px-3">Blog</a></li>
<li class='nav-item'><a href="https://github.com/rubygems/rubygems/tree/master/bundler" class="nav-link px-3">Repository</a></li>
</ul>
</nav>

</div>
</body>
</html>
